# 迷宫游戏 (Maze Game)

## 项目简介

这款游戏是基于 Qt 框架开发的迷宫游戏，玩家在迷宫中探险、解决任务，并逐步进入更复杂的关卡。游戏具有注册、登录、关卡选择、地图编辑、任务迷宫等多种功能，提供了丰富的游戏体验。玩家通过操作人物完成任务、破解迷宫并进入下一关，享受冒险和解谜的乐趣。

## 安装与运行

### 环境要求

- 操作系统：Windows11
- 开发环境：Qt 6.x 或更高版本
- 编译器：支持 C++11 或更高版本的编译器（如 MSVC, GCC 等）

### 安装步骤

1. 下载并运行安装程序 `迷宫游戏安装程序.exe`。
2. 完成安装后，运行 `maze.exe` 启动游戏。

### 游戏流程

#### 1. 注册/登录界面

- 游戏启动后，首先会进入**注册/登录界面**。
- 若点击**注册**按钮，系统将检查输入的用户名和密码是否已存在于 `users.txt` 文件中。
  - 如果用户名已存在，则系统会提示重复注册，要求重新输入。
  - 如果用户名不存在，则完成注册并抛出“登录成功”信号。
- 若点击**登录**按钮，系统会检查输入的用户名和密码是否与 `users.txt` 中记录一致。
  - 如果用户名和密码匹配成功，系统抛出“登录成功”信号，进入主界面。
  - 如果用户名或密码不正确，系统会提示错误并允许重新尝试登录。若错误次数超过三次，程序将自动退出。

#### 2. 主界面

- 登录成功后，进入**主界面**，主界面包含两个按钮：
  - **开始游戏**：点击后进入关卡选择界面。
  - **地图编辑**：点击后进入地图编辑器界面。

#### 3. 关卡选择界面

- 在**关卡选择界面**，会显示 16 个关卡按钮（`imgButton`），每个按钮代表一个关卡。
- 点击任意按钮，将触发该按钮对应的整形 level 信号，进入对应的游戏关卡。

#### 4. 地图编辑器

- 在**地图编辑器界面**，玩家可以通过以下操作编辑游戏地图：
  - **加号**和**减号**按钮分别用于增大和缩小地图的尺寸。
  - **随机生成**按钮使用 DFS 算法根据当前地图尺寸随机生成迷宫。
  - **开始游戏**按钮用于开始游戏，生成地图后进入游戏流程。

#### 5. 游戏主界面

- 在游戏开始后，玩家将进入**PlayWindow**，其中涉及的主要功能如下：
  - 玩家通过键盘（WASD）控制角色在迷宫中移动。
  - 玩家若走到任务迷宫入口，将进入任务迷宫。
    - 任务迷宫要求玩家完成所有任务点，才能从任务迷宫返回主迷宫。
  - 在主迷宫的出口处，若玩家完成任务，将提示是否进入下一关。
    - 若选择是，则进入下一关的非任务迷宫。
    - 若选择否，则弹出游戏结算界面并结束游戏。
  - 若玩家在非第一层的非任务迷宫中走到入口，将询问是否返回上一层迷宫。
    - 若选择是，则返回上一层的非任务迷宫。

## 代码结构

- `main.cpp`：程序入口，负责启动应用，初始化注册/登录界面。
- `registerloginwindow.cpp`：管理用户的注册和登录逻辑，读取和写入 `users.txt` 文件。
- `mainwindow.cpp`：主界面，包含开始游戏和地图编辑功能。
- `mapselectwindow.cpp`：关卡选择界面，展示并管理关卡选择按钮。
- `mapeditwindow.cpp`：地图编辑界面，允许玩家编辑、生成并调整迷宫地图。
- `playwindow.cpp`：游戏主窗口，包含迷宫的绘制与玩家操作。
- `mazegenerator.cpp`：迷宫生成算法，使用 DFS 算法生成随机迷宫。
- `tiletexture.cpp`：用于管理迷宫中的每个格子的贴图和状态。
- ...

## 游戏操作

- **WASD 键**：控制角色在迷宫中的上下左右移动。
- **点击按钮**：在不同界面中选择游戏选项，如开始游戏、地图编辑、选择关卡等。
- **在任务迷宫中**：完成所有任务点后，返回主迷宫。
- **在主迷宫出口**：选择是否进入下一关，或者退出游戏。

## TODO

- **优化迷宫生成算法**：改进当前的 DFS 算法，使生成的迷宫更加复杂和有趣。
- **关卡设计**：增加更多关卡和挑战，丰富游戏的内容。
- **多人模式**：考虑未来增加多人游戏功能，支持多人合作或对抗。

## 联系方式

- 作者：DayShift
- 电子邮件：2922897389@qq.com
---

感谢你游玩本游戏，祝你游戏愉快！有任何问题，欢迎联系我！
